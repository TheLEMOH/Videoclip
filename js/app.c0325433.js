(function(t){function e(e){for(var i,s,o=e[0],c=e[1],l=e[2],u=0,f=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&f.push(r[s][0]),r[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);d&&d(e);while(f.length)f.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],i=!0,o=1;o<a.length;o++){var c=a[o];0!==r[c]&&(i=!1)}i&&(n.splice(e--,1),t=s(s.s=a[0]))}return t}var i={},r={app:0},n=[];function s(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=i,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(a,i,function(e){return t[e]}.bind(null,i));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="./";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var d=c;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},"22d7":function(t,e,a){"use strict";a("be87")},"29f2":function(t,e,a){"use strict";a("dc2c")},"2b0e4":function(t,e,a){},"2e5f":function(t,e,a){"use strict";a("2b0e4")},"3c77":function(t,e,a){t.exports=a.p+"img/arrow-dir.7931be5d.svg"},4678:function(t,e,a){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(t){var e=n(t);return a(e)}function n(t){if(!a.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}r.keys=function(){return Object.keys(i)},r.resolve=n,t.exports=r,r.id="4678"},5490:function(t,e,a){"use strict";a("a6b6")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("div",{staticClass:"header_videoclip"},[i("Header")],1),i("div",{staticClass:"body_videoclip"},[i("Map",{staticClass:"map_videoclip",attrs:{layers:t.layers,sites:t.receivedSites}}),i("Control",{staticClass:"control_videoclip",attrs:{dates:t.dates,wind:t.receivedWind,tooltips:t.tooltips},on:{"update-time":t.UpdateMap,"update-indicator":t.UpdateIndicator,"show-analytic":t.ShowAnalytic}}),i("Analytics",{style:{visibility:1==t.showAnalytic?"visible":"hidden"},attrs:{data:t.selectedDataForChart,dataWind:t.selectedDataForChartWind,dataWindDir:t.selectedDataForChartWindDir,description:t.description,loading:t.loading}})],1),i("transition",{attrs:{name:"arrow"}},[1==t.show?i("img",{staticClass:"arrow_videoclip",attrs:{src:a("ec55"),width:"74px",height:"74px"}}):t._e()])],1)},n=[],s=a("2909"),o=(a("d81d"),a("a9e3"),a("b680"),a("a4d3"),a("e01a"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mark_videoclip_container"},[i("div",{staticClass:"mark_videoclip_play"},[i("button",{staticClass:"btn-play",on:{click:t.Action}},[0==t.play?i("img",{attrs:{src:a("5830"),width:"74px",height:"74px"}}):i("img",{attrs:{src:a("ec7e"),width:"74px",height:"74px"}})])]),i("div",{staticClass:"mark_videoclip_tooltips"},[i("ul",{staticClass:"ul_videoclip p-0 m-0"},t._l(t.tooltips,(function(e,a){return i("li",{key:a,on:{click:function(e){return t.Active(a)}}},[i("div",{staticClass:"card mark_videoclip_tooltip",class:{mark_videoclip_tooltip_active:a==t.activeElement},style:{background:e.color,color:e.text}},[i("div",{staticClass:"card-header mark_videoclip_tooltip_header p-0 m-0 text-center",style:{background:t.LightenDarkenColor(-.3,e.color),color:e.text}},[i("span",[t._v(t._s(t.Formater(t.dates[a])))])]),i("div",{staticClass:"card-body p-0 m-0 ml-0"},[i("div",{staticClass:"info_videoclip_container"},[i("ul",{staticClass:"ul_info_videoclip text-center"},[i("li",[i("span",{staticClass:"mark_videoclip_text_PM"},[t._v(t._s(e.value))])])]),i("ul",{staticClass:"ul_info_videoclip_wind"},[i("li",[i("span",[t._v(t._s(e.valueT)+"°C")])]),i("li",[i("span",[t._v(t._s(t.wind.windDir[a])+",")]),i("span",{staticClass:"ml-2"},[t._v(t._s(t.wind.windSpeed[a])+" ")]),t._m(0,!0)])])])])])])})),0)]),i("div",{staticClass:"mark_videoclip_pause"},[i("Modal",{on:{"update-indicator":t.UpdateIndicator}})],1),i("div",{staticClass:"analytic_videoclip_button"},[i("img",{staticClass:"btn-play",attrs:{src:a("9618"),width:"74px",height:"74px"},on:{click:t.ShowAnalytic}})])])}),c=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"frac"},[a("sup",[t._v("м")]),a("sub",[t._v("с")])])}],l=a("3835"),d=(a("159b"),a("1276"),a("ac1f"),a("fb6a"),a("d3b7"),a("25f0"),a("1da1")),u=(a("96cf"),a("4de4"),a("99af"),a("a79f"));u["a"].defs("EPSG:3857"),u["a"].defs("EPSG:4326"),u["a"].defs("EPSG:28416","+proj=tmerc +lat_0=0 +lon_0=93 +k=1 +x_0=16500000 +y_0=0 +ellps=krass +towgs84=23.92,-141.27,-80.9,-0,0.35,0.82,-0.12 +units=m +no_defs");var f=[0,12,35.4,55.4,150,200,250,1e3],p=[0,50,100,150,200,300,500,1e3],h=[0,1,10],m={PM:f,AQI:p,PDK:h},v={PM:348,AQI:355,PDK:400,TEMP:103,DIR:101,SPEED:102},b={PM:"PM",AQI:"AQI",PDK:"ПДК",TEMP:"Температура",DIR:"Направление ветра",SPEED:"Скорость ветра"},g={PM:1e3,AQI:1,PDK:1,TEMP:1},j=[{color:"rgb(0,153,102)",text:"rgb(250,250,250)"},{color:"rgb(255,222,51)",text:"rgb(0,0,0)"},{color:"rgb(255,153,51)",text:"rgb(250,250,250)"},{color:"rgb(204,0,51)",text:"rgb(250,250,250)"},{color:"rgb(102,0,153)",text:"rgb(250,250,250)"},{color:"rgb(126,0,35)",text:"rgb(250,250,250)"},{color:"rgb(0,0,0)",text:"rgb(250,250,250)"}],y=[{color:"rgb(0,153,102)",text:"rgb(250,250,250)"},{color:"rgb(255,222,51)",text:"rgb(0,0,0)"},{color:"rgb(255,153,51)",text:"rgb(250,250,250)"},{color:"rgb(204,0,51)",text:"rgb(250,250,250)"},{color:"rgb(102,0,153)",text:"rgb(250,250,250)"},{color:"rgb(126,0,35)",text:"rgb(250,250,250)"},{color:"rgb(0,0,0)",text:"rgb(250,250,250)"}],_=[{color:"rgb(0,153,102)",text:"rgb(250,250,250)"},{color:"rgb(204,0,51)",text:"rgb(250,250,250)"}],x={PM:j,AQI:y,PDK:_};function w(t,e,a){return C.apply(this,arguments)}function C(){return C=Object(d["a"])(regeneratorRuntime.mark((function t(e,a,i){var r,n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=a.map((function(t){return v[t]})),n="https://gis.krasn.ru/sc/api/1.0/projects/9/aggvalues?&key=654hblgm9gl8367h&time_begin=".concat(e[0]," 00:00:00&time_end=").concat(e[e.length-1]," 23:00:00&time_interval=").concat(i,"&indicators=").concat(r,"&limit=30000'"),s=fetch(n),o=s.then((function(t){return A(t)})),t.abrupt("return",o);case 5:case"end":return t.stop()}}),t)}))),C.apply(this,arguments)}function k(t,e,a){return D.apply(this,arguments)}function D(){return D=Object(d["a"])(regeneratorRuntime.mark((function t(e,a,i){var r,n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=a.map((function(t){return v[t]})),n="https://gis.krasn.ru/sc/api/1.0/projects/6/aggvalues?&key=654hblgm9gl8367h&sites=4203&time_begin=".concat(e[0]," 00:00:00&time_end=").concat(e[e.length-1]," 23:00:00&time_interval=").concat(i,"&").concat(r,"&limit=30000'"),s=fetch(n),o=s.then((function(t){return A(t)})),t.abrupt("return",o);case 5:case"end":return t.stop()}}),t)}))),D.apply(this,arguments)}function P(t){return E.apply(this,arguments)}function E(){return E=Object(d["a"])(regeneratorRuntime.mark((function t(e){var a,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="https://gis.krasn.ru/sc/api/1.0/projects/9/sites?&key=654hblgm9gl8367h&time_begin=".concat(e[0]," 00:00:00&time_end=").concat(e[e.length-1]," 00:00:00&limit=30000'"),i=fetch(a),r=i.then((function(t){return I(t)})),t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)}))),E.apply(this,arguments)}function A(t){return M.apply(this,arguments)}function M(){return M=Object(d["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.text().then((function(t){var e=[],a=new DOMParser,i=a.parseFromString(t,"text/xml"),r=i.getElementsByTagName("aggvalue");return r.forEach((function(t){var a=t.getAttribute("indicator"),i=t.getAttribute("time").substring(0,t.getAttribute("time").length-3).split(" ")[0],r=t.getAttribute("time").substring(0,t.getAttribute("time").length-3).split(" ")[1],n=Number(t.getElementsByTagName("avg")[0].innerHTML).toFixed(6),s=t.getAttribute("site"),o=t.getElementsByTagName("location")[0];if(o){var c=o.getAttribute("x"),l=o.getAttribute("y");e.push({site:s,indicator:a,time:i,hour:r,value:n,coordinates:Object(u["a"])("EPSG:4326","EPSG:28416",[Number(c),Number(l)])})}})),e})),t.abrupt("return",a);case 2:case"end":return t.stop()}}),t)}))),M.apply(this,arguments)}function I(t){return S.apply(this,arguments)}function S(){return S=Object(d["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.text().then((function(t){var e=[],a=new DOMParser,i=a.parseFromString(t,"text/xml"),r=i.getElementsByTagName("site");return r.forEach((function(t){var a=t.getAttribute("id"),i=t.getElementsByTagName("location")[0],r=t.getElementsByTagName("name")[0].innerHTML;i&&e.push({id:a,name:r})})),e})),t.abrupt("return",a);case 2:case"end":return t.stop()}}),t)}))),S.apply(this,arguments)}function O(){return T.apply(this,arguments)}function T(){return T=Object(d["a"])(regeneratorRuntime.mark((function t(){var e,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=new Date,a=new Date,i=[],a.setDate(a.getDate()-7);while(a.getTime()<e.getTime())i.push(F(a)),a.setDate(a.getDate()+1);return t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)}))),T.apply(this,arguments)}function F(t){var e=t.getDate();e<10&&(e="0"+e);var a=t.getMonth()+1;a<10&&(a="0"+a);var i=t.getFullYear();return i<10&&(i="0"+i),i+"-"+a+"-"+e}function z(t){if(void 0!=t){var e=t.split(" ")[0].split("-"),a=new Date(e[0],e[1]-1,e[2],0,0,0).toLocaleString("ru",{month:"short",day:"numeric",weekday:"short"});return a}return(new Date).toLocaleString("ru",{month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric"})}function N(t,e,a){var i=v[a],r=t.filter((function(t){if(t.time==e&&(t.indicator==i||t.indicator==a))return t}));return r}function R(t,e){var a=v[e],i=t.filter((function(t){if(t.indicator==a)return t}));return i}function W(t,e){var a=t.map((function(t){var a=0;"PM"!=e&&"AQI"!=e||(a=(t.value*g[e]).toFixed(0)),"PDK"==e&&(a=(t.value*g[e]).toFixed(2));for(var i=1;i<m[e].length;i++)if(Number(a)>=m[e][i-1]&&Number(a)<m[e][i])return{id:t.site,fill:x[e][i-1].color,radius:27,value:a,text:x[e][i-1].text,font:"20px sans-serif",stroke:{color:"white",width:2},zindex:10,coordinates:t.coordinates}}));return a}function G(t){var e=35,a=t.map((function(t){var a=1e3*t.value,i=(a/e).toFixed(2);return{site:t.site,indicator:"400",time:t.time,hour:t.hour,value:i,coordinates:t.coordinates}}));return a}function B(t,e,a){var i=e.map((function(e){var i=N(t,e,a),r=N(t,e,"TEMP"),n=$(i,a),s=$(r,"TEMP");return{AVG:n,AVGT:s}})),r=i.map((function(t){for(var e=0;e<m[a].length;e++)if(Number(t.AVG)>=m[a][e-1]&&Number(t.AVG)<m[a][e])return{color:x[a][e-1].color,text:x[a][e-1].text,value:t.AVG,valueT:Math.round(t.AVGT)}}));return r}function $(t,e){var a=0,i=t.length;return t.forEach((function(t){a+=Number(t.value)})),"PM"==e||"AQI"==e||"TEMP"==e?(a/i*g[e]).toFixed(0):"PDK"==e?(a/i*g[e]).toFixed(2):void 0}function U(t,e){for(var a=t[0].hour,i=0,r=0,n=[],s=0;s<t.length;s++)if(a!=t[s].hour||s==t.length-1){var o="PDK"==e?(i/r).toFixed(2):Math.round(i/r*g[e]);n.push({hour:a,value:o}),a=t[s].hour,i=0,r=0}else i+=Number(t[s].value),r++;return n}function K(t,e){var a=[],i=[],r=[];t.forEach((function(t){if(a.push(t.hour),i.push(t.value),"PM"==e||"AQI"==e||"PDK"==e)for(var n=0;n<m[e].length;n++)Number(t.value)>=m[e][n-1]&&Number(t.value)<m[e][n]&&r.push(x[e][n-1].color);"SPEED"==e&&r.push("#008B8B")}));var n={labels:a,datasets:[{label:b[e],backgroundColor:r,data:i}]};return n}function L(t){return t>=0&&t<11.25?"С":t>=11.25&&t<33.75?"ССВ":t>=33.75&&t<56.25?"СВ":t>=56.25&&t<78.75?"ВСВ":t>=78.75&&t<101.25?"В":t>=101.25&&t<123.75?"ВЮВ":t>=123.75&&t<146.25?"ЮВ":t>=146.25&&t<168.75?"ЮЮВ":t>=168.75&&t<191.25?"Ю":t>=191.25&&t<213.75?"ЮЮЗ":t>=213.75&&t<236.25?"ЮЗ":t>=236.25&&t<258.75?"ЗЮЗ":t>=258.75&&t<281.25?"З":t>=281.25&&t<303.75?"ЗСЗ":t>=303.75&&t<326.25?"СЗ":t>=326.25&&t<348.75?"ССЗ":t>=348.75?"С":void 0}function Q(t){return t>=0&&t<11.25?0:t>=11.25&&t<33.75?22.5:t>=33.75&&t<56.25?45:t>=56.25&&t<78.75?67.5:t>=78.75&&t<101.25?90:t>=101.25&&t<123.75?112.5:t>=123.75&&t<146.25?135:t>=146.25&&t<168.75?157.5:t>=168.75&&t<191.25?180:t>=191.25&&t<213.75?202.5:t>=213.75&&t<236.25?225:t>=236.25&&t<258.75?247.5:t>=258.75&&t<281.25?270:t>=281.25&&t<303.75?292.5:t>=303.75&&t<326.25?315:t>=326.25&&t<348.75?337.5:t>=348.75?0:void 0}var V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"tooltip_videoclip"},[null!=t.selectedIndicator?a("span",{staticClass:"tooltiptext text-center"},[t._v(t._s(t.selectedIndicator.name))]):t._e()]),t._m(0),a("div",{staticClass:"modal fade",attrs:{id:"staticBackdrop","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered modal-dialog-scrollable"},[a("div",{staticClass:"modal-content"},[t._m(1),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},t._l(t.indicators,(function(e){return a("div",{key:e.id,staticClass:"col"},[a("button",{staticClass:"btn btn-warning btn-lg",attrs:{"data-dismiss":"modal"},on:{click:function(a){return t.SelectIndicator(e.type,e.description)},mouseover:function(a){t.selectedIndicator=e}}},[t._v(" "+t._s(e.name)+" ")])])})),0),a("div",{staticClass:"row"},[null!=t.selectedIndicator?a("div",{staticClass:"col pt-2"},[t._v(" "+t._s(t.selectedIndicator.description)+" ")]):t._e()])]),a("div",{staticClass:"modal-footer"},[a("div",{staticClass:"row full"},[a("div",{staticClass:"col"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.save,expression:"save"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"RememberSelection"},domProps:{checked:Array.isArray(t.save)?t._i(t.save,null)>-1:t.save},on:{change:function(e){var a=t.save,i=e.target,r=!!i.checked;if(Array.isArray(a)){var n=null,s=t._i(a,n);i.checked?s<0&&(t.save=a.concat([n])):s>-1&&(t.save=a.slice(0,s).concat(a.slice(s+1)))}else t.save=r}}}),a("label",{staticClass:"form-check-label font-weight-bold",attrs:{for:"RememberSelection"}},[t._v("Запомнить выбор")])])]),t._m(2)])])])])])])},H=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("button",{staticClass:"btn-play",attrs:{type:"button","data-toggle":"modal","data-target":"#staticBackdrop"}},[i("img",{attrs:{src:a("66e6"),id:"MyIMG",width:"74px",height:"74px"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header p-0 m-0 modal_videoclip_header"},[a("h5",{staticClass:"modal-title p-2",attrs:{id:"staticBackdropLabel"}},[t._v(" Выбор единиц измерения ")]),a("button",{staticClass:"modal_videoclip_close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col"},[a("button",{staticClass:"modal_videoclip_button p-1",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" Закрыть ")])])}],q=(a("7db0"),a("1157")),J=a.n(q),Y={data:function(){return{save:!1,selectedIndicator:null,indicators:[{id:0,name:"PM2.5",type:"PM",description:"Концентрация взвешенных частиц в мкг/м3"},{id:1,name:"AQI",type:"AQI",description:"Индекс качества воздуха AQI"},{id:2,name:"ПДК",type:"PDK",description:"Доля среднесуточного ПДК (35 мкг/м3)"}]}},mounted:function(){J()("#MyIMG").tooltip("show");var t=localStorage.getItem("KNC_VIDEOCLIP_INDICATOR");if(t){var e=this.indicators.find((function(e){return e.type==t}));this.selectedIndicator=e}else J()("#staticBackdrop").modal("show"),this.selectedIndicator=this.indicators[0];this.SelectIndicator(this.selectedIndicator.type,this.selectedIndicator.description)},methods:{SelectIndicator:function(t,e){1==this.save&&localStorage.setItem("KNC_VIDEOCLIP_INDICATOR",t),this.$emit("update-indicator",t,e)}}},X=Y,Z=(a("22d7"),a("2877")),tt=Object(Z["a"])(X,V,H,!1,null,null,null),et=tt.exports,at={components:{Modal:et},props:["dates","tooltips","wind"],data:function(){return{selectedIndex:0,min:0,max:7,text:"Play",play:!1,t:[],activeElement:0}},methods:{ShowAnalytic:function(){this.$emit("show-analytic")},UpdateTime:function(){this.$emit("update-time",this.selectedIndex,this.play)},UpdateIndicator:function(t,e){this.Pause(),this.$emit("update-indicator",t,e)},Play:function(){var t=this,e=2e3;this.text="Pause",this.UpdateTime(),this.activeElement=0;for(var a=function(a){t.t.push(setTimeout((function(){t.play&&(t.activeElement=a,t.selectedIndex=t.dates[a],t.UpdateTime()),a==t.max-1&&t.Pause()}),a*e))},i=this.activeElement;i<this.max;i++)a(i)},Pause:function(){this.play=!1,this.t.forEach((function(t){clearTimeout(t)})),this.text="Play"},Action:function(){this.play=!this.play,this.play?this.Play():this.Pause()},Formater:function(t){return z(t)},LightenDarkenColor:function(t,e,a,i){var r,n,s,o,c,d,u,f=parseInt,p=Math.round,h="string"==typeof a;return"number"!=typeof t||t<-1||t>1||"string"!=typeof e||"r"!=e[0]&&"#"!=e[0]||a&&!h?null:(this.pSBCr||(this.pSBCr=function(t){var e=t.length,a={};if(e>9){var i,o;if(i=t=t.split(","),o=Object(l["a"])(i,4),r=o[0],n=o[1],s=o[2],h=o[3],e=t.length,e<3||e>4)return null;a.r=f("a"==r[3]?r.slice(5):r.slice(4)),a.g=f(n),a.b=f(s),a.a=h?parseFloat(h):-1}else{if(8==e||6==e||e<4)return null;e<6&&(t="#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+(e>4?t[4]+t[4]:"")),t=f(t.slice(1),16),9==e||5==e?(a.r=t>>24&255,a.g=t>>16&255,a.b=t>>8&255,a.a=p((255&t)/.255)/1e3):(a.r=t>>16,a.g=t>>8&255,a.b=255&t,a.a=-1)}return a}),u=e.length>9,u=h?a.length>9||"c"==a&&!u:u,c=this.pSBCr(e),o=t<0,d=a&&"c"!=a?this.pSBCr(a):o?{r:0,g:0,b:0,a:-1}:{r:255,g:255,b:255,a:-1},t=o?-1*t:t,o=1-t,c&&d?(i?(r=p(o*c.r+t*d.r),n=p(o*c.g+t*d.g),s=p(o*c.b+t*d.b)):(r=p(Math.pow(o*Math.pow(c.r,2)+t*Math.pow(d.r,2),.5)),n=p(Math.pow(o*Math.pow(c.g,2)+t*Math.pow(d.g,2),.5)),s=p(Math.pow(o*Math.pow(c.b,2)+t*Math.pow(d.b,2),.5))),h=c.a,d=d.a,c=h>=0||d>=0,h=c?h<0?d:d<0?h:h*o+d*t:0,u?"rgb"+(c?"a(":"(")+r+","+n+","+s+(c?","+p(1e3*h)/1e3:"")+")":"#"+(4294967296+16777216*r+65536*n+256*s+(c?p(255*h):0)).toString(16).slice(1,c?void 0:-2)):null)},Active:function(t){this.selectedIndex=this.dates[t],this.activeElement=t,this.Pause(),this.UpdateTime()}},computed:{marks:function(){var t=this,e={};return this.dates.forEach((function(a,i){e[a]={label:"".concat(t.tooltips[i].value),labelStyle:{visibility:"hidden"}}})),e}}},it=at,rt=Object(Z["a"])(it,o,c,!1,null,null,null),nt=rt.exports,st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("vl-map",{ref:"map",attrs:{controls:!1},on:{pointermove:t.onMapPointerMove}},[a("vl-view",{attrs:{zoom:t.zoom,center:t.center,projection:t.projection}}),a("vl-layer-tile",{attrs:{id:"xkcd"}},[a("vl-source-wms",{attrs:{"layer-name":"layerName",url:t.url,attributions:t.attributions,layers:t.layer,format:t.format,version:t.version,projection:t.projection,resolutions:t.resolutions,tileGrid:t.tileGrid,extent:t.extent}})],1),a("vl-layer-vector",{attrs:{id:"points"}},[a("vl-source-vector",{attrs:{features:t.features,projection:t.projection,extent:t.extent}}),a("vl-style-func",{attrs:{factory:t.pointsStyleFunc}})],1),t.currentPosition?a("vl-overlay",{attrs:{position:t.currentPosition,projection:t.projection,extent:t.extent,"auto-pan":!0}},[[a("div",{staticClass:"overlay_videoclip"},[t._v(t._s(t.text))])]],2):t._e()],1)},ot=[],ct=(a("b0c0"),a("cb29"),a("ce2c")),lt=a("83a6"),dt=a("8682"),ut=a("6c77"),ft=a("8295"),pt=a("2986");u["a"].defs("EPSG:4326"),u["a"].defs("EPSG:28416","+proj=tmerc +lat_0=0 +lon_0=93 +k=1 +x_0=16500000 +y_0=0 +ellps=krass +towgs84=23.92,-141.27,-80.9,-0,0.35,0.82,-0.12 +units=m +no_defs");var ht={extent:[11385622.915,2840622.915,21404377.085,12859377.085],resolutions:[39135.7584765625,19567.87923828125,9783.939619140625,4891.9698095703125,2445.9849047851562,1222.9924523925781,611.4962261962891,305.74811309814453,152.87405654907226,76.43702827453613,38.218514137268066,19.109257068634033,9.554628534317017,4.777314267158508,2.388657133579254,1.194328566789627,.5971642833948135],proj:"EPSG:28416",projText:"+proj=tmerc +lat_0=0 +lon_0=93 +k=1 +x_0=16500000 +y_0=0 +ellps=krass +towgs84=23.92,-141.27,-80.9,-0,0.35,0.82,-0.12 +units=m +no_defs"},mt=pt["y"]({code:ht.proj,extent:ht.extent,units:"m"});pt["r"](mt);var vt,bt,gt={props:["layers","sites"],data:function(){return{show:!0,currentPosition:void 0,text:"",zoom:10.5,center:Object(u["a"])("EPSG:4326","EPSG:28416",[92.886,56.038]),rotation:0,extent:ht.extent,projection:mt.getCode(),layer:"egis_gk_light",format:"image/png",version:"1.1.1",tileGrid:{extent:ht.extent,resolutions:ht.resolutions},resolutions:ht.resolutions,crossOrigin:"anonymous",url:"http://map{1-4}.24bpd.ru/geowebcache/service/wms?",attributions:['© <a href="http://24bpd.ru/" target="_blank">Енисей-ГИС</a>']}},methods:{onMapPointerMove:function(t){var e=this.$refs.map,a=e.forEachFeatureAtPixel(t.pixel,(function(t){return t}));if(a){var i=a.getId(),r=this.sites.find((function(t){if(t.id==i)return t})),n=a.getGeometry().getCoordinates();this.currentPosition=n,this.text=r.name}else this.currentPosition=void 0},pointsStyleFunc:function(){return function(t){var e=new ct["a"]({radius:t.get("radius"),fill:new lt["a"]({color:t.get("color")}),stroke:new dt["a"](t.get("stroke"))}),a=new ut["a"]({image:e,text:new ft["a"]({font:t.get("font"),text:t.get("value"),fill:new lt["a"]({color:t.get("fontColor")})})});return[a]}}},computed:{features:function(){var t=this.layers.map((function(t){return{type:"Feature",id:t.id,geometry:{type:"Point",coordinates:t.coordinates},properties:{radius:t.radius,font:t.font,value:t.value,fontColor:t.text,color:t.fill,stroke:t.stroke}}}));return t}}},jt=gt,yt=(a("5490"),Object(Z["a"])(jt,st,ot,!1,null,null,null)),_t=yt.exports,xt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},wt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"air-header"},[a("div",{staticClass:"air-logo"},[a("img",{attrs:{src:"assets/logo.png",alt:"Система мониторинга воздуха - Красноярский научный центр СО РАН"}})]),a("div",{staticClass:"air-title"},[a("p",[t._v("Система мониторинга воздуха")]),a("p",[t._v("Красноярский научный центр СО РАН")])]),a("ul",{staticClass:"air-links air-links-main"},[a("li",[a("a",{attrs:{sec:"table",href:"index.html"}},[t._v("Таблица")])]),a("li",[a("a",{attrs:{sec:"map",href:"map.html"}},[t._v("Карта")])]),a("li",[a("a",{staticClass:"airActiveButton",attrs:{sec:"week",href:"week.html"}},[t._v("7 дней")])]),a("li",[a("a",{attrs:{sec:"data",href:"data.html"}},[t._v("Данные")])]),a("li",[a("a",{attrs:{sec:"help",href:"help.html"}},[t._v("?")])])]),a("ul",{staticClass:"air-links air-links-sec"},[a("li",{attrs:{id:"air-login"}},[a("a",[a("img",{attrs:{src:"assets/person-24px.svg"}})])]),a("li",{staticStyle:{display:"none"},attrs:{id:"air-logout"}},[a("a",[t._v("User")])])])])}],Ct={},kt=Ct,Dt=(a("8baf"),Object(Z["a"])(kt,xt,wt,!1,null,null,null)),Pt=Dt.exports,Et=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"analytic_videoclip"},[t.loading?i("div",{staticClass:"loading_videoclip"},[i("img",{attrs:{src:a("b889")}})]):t._e(),i("h3",{staticClass:"text-center"},[t._v(t._s(t.description))]),t.data?i("BarChart",{staticClass:"chart_videoclip",attrs:{data:t.data}}):t._e(),i("h3",{staticClass:"text-center mt-3"},[t._v("Скорость ветра")]),t.dataWind?i("BarChart",{staticClass:"chart_videoclip",attrs:{data:t.dataWind}}):t._e(),i("WindDir",{attrs:{data:t.dataWindDir}})],1)},At=[],Mt=a("86fc"),It={extends:Mt["a"],props:["data"],data:function(){return{options:{legend:{display:!1},scales:{xAxes:[{ticks:{fontColor:"white",fontSize:"16"},gridLines:{color:"grey",lineWidth:1}}],yAxes:[{ticks:{fontColor:"white",fontSize:"16"},gridLines:{color:"grey",lineWidth:1}}]},responsive:!0,maintainAspectRatio:!1}}},mounted:function(){this.renderChart(this.data,this.options)},watch:{data:function(){var t=0,e=Math.max.apply(null,this.data.datasets[0].data),a=10*e/100,i=Math.ceil(e+a);this.options.scales.yAxes[0].ticks.min=t,this.options.scales.yAxes[0].ticks.max=i,this.renderChart(this.data,this.options)}}},St=It,Ot=Object(Z["a"])(St,vt,bt,!1,null,null,null),Tt=Ot.exports,Ft=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wind_direction_videoclip"},t._l(t.data,(function(e){return i("div",{key:e.hour,staticClass:"wind_direction_card"},[i("img",{style:{transform:"rotate("+(Number(180)+e.value)+"deg)"},attrs:{src:a("3c77")}}),i("span",{staticClass:"wind_direction_card_text"},[t._v(t._s(e.text))])])})),0)},zt=[],Nt={props:["data"]},Rt=Nt,Wt=(a("29f2"),Object(Z["a"])(Rt,Ft,zt,!1,null,null,null)),Gt=Wt.exports,Bt={props:["data","dataWind","dataWindDir","description","loading"],components:{BarChart:Tt,WindDir:Gt}},$t=Bt,Ut=(a("2e5f"),Object(Z["a"])($t,Et,At,!1,null,null,null)),Kt=Ut.exports,Lt={name:"App",data:function(){return{receivedData:[],receivedDataHour:[],receivedWind:[],receivedSites:[],selectedDataForChart:[],selectedDataForChartWind:[],selectedDataForChartWindDir:[],savedDataforChart:[],savedDataforChartWind:[],layers:[],tooltips:[],dates:[],indicator:"PM",description:"Концентрация взвешенных частиц в мкг/м3",time:"",show:!0,loading:!1,showAnalytic:!1}},components:{Map:_t,Control:nt,Header:Pt,Analytics:Kt},mounted:function(){var t=this;O().then((function(e){t.time=e[0],P(e).then((function(e){t.receivedSites=e})),w(e,["PM","AQI","TEMP"],"1day").then((function(a){var i=R(a,"PM"),r=G(i);a.push.apply(a,Object(s["a"])(r));var n=localStorage.getItem("KNC_VIDEOCLIP_INDICATOR");n&&(t.show=!1,t.indicator=n),t.dates=e,t.receivedData=a,t.tooltips=B(a,e,t.indicator);var o=N(a,e[0],t.indicator);t.layers=W(o,t.indicator)})),k(e,["SPEED","DIR"],"1day").then((function(e){var a=R(e,"DIR").map((function(t){return L(t.value)})),i=R(e,"SPEED").map((function(t){var e=Number(t.value);return e.toFixed(0)}));t.receivedWind={windDir:a,windSpeed:i}}))}))},methods:{ShowAnalytic:function(){this.showAnalytic=!this.showAnalytic,this.UpdateAnalytic(!1)},UpdateAnalytic:function(t){var e=this;if(this.showAnalytic&&0==t){var a=[this.time,this.time],i=N(this.savedDataforChart,this.time,this.indicator);0!=i.length?this.selectedDataForChart=i[0].datasets:"PDK"!=this.indicator?(this.loading=!0,w(a,[this.indicator],"1hour").then((function(t){var a=R(t,e.indicator),i=U(a,e.indicator),r=K(i,e.indicator);e.savedDataforChart.push({time:e.time,indicator:e.indicator,datasets:r}),e.selectedDataForChart=r,e.loading=!1}))):(this.loading=!0,w(a,["PM"],"1hour").then((function(t){var a=R(t,"PM"),i=G(a),r=U(i,e.indicator),n=K(r,e.indicator);e.savedDataforChart.push({time:e.time,indicator:e.indicator,datasets:n}),e.selectedDataForChart=n,e.loading=!1})));var r=N(this.savedDataforChart,this.time,"SPEED");0!=r.length?this.selectedDataForChartWind=r[0].datasets:k(a,["SPEED"],"1hour").then((function(t){var a=R(t,"SPEED").map((function(t){var e=Number(t.value);return{hour:t.hour,value:e.toFixed(0)}})),i=K(a,"SPEED");e.savedDataforChart.push({time:e.time,indicator:"SPEED",datasets:i}),e.selectedDataForChartWind=i}));var n=N(this.savedDataforChart,this.time,"DIR");0!=n.length?this.selectedDataForChartWindDir=n[0].datasets:k(a,["DIR"],"3hour").then((function(t){var a=R(t,"DIR").map((function(t){return{hour:t.hour,value:Q(t.value),text:L(t.value)}}));e.savedDataforChart.push({time:e.time,indicator:"DIR",datasets:a}),e.selectedDataForChartWindDir=a}))}},UpdateMap:function(t,e){this.time=t;var a=N(this.receivedData,this.time,this.indicator);this.layers=W(a,this.indicator),this.UpdateAnalytic(e)},UpdateIndicator:function(t,e){this.show=!1,this.indicator=t,this.description=e;var a=N(this.receivedData,this.time,this.indicator);this.layers=W(a,t),this.tooltips=B(this.receivedData,this.dates,t),this.UpdateAnalytic(!1)}}},Qt=Lt,Vt=(a("034f"),Object(Z["a"])(Qt,r,n,!1,null,null,null)),Ht=Vt.exports,qt=a("1cf8"),Jt=(a("4989"),a("f9e3"),a("2b69"),a("4971")),Yt=a.n(Jt);a("24df");i["default"].component("VueSlider",Yt.a),i["default"].config.productionTip=!1,i["default"].use(qt["a"]),new i["default"]({render:function(t){return t(Ht)}}).$mount("#app")},5830:function(t,e,a){t.exports=a.p+"img/play.993f667f.svg"},"66e6":function(t,e,a){t.exports=a.p+"img/wheel.a8d5cb2f.svg"},6860:function(t,e,a){},"85ec":function(t,e,a){},"8baf":function(t,e,a){"use strict";a("6860")},9618:function(t,e,a){t.exports=a.p+"img/bar-chart.f52c3fac.svg"},a6b6:function(t,e,a){},b889:function(t,e,a){t.exports=a.p+"img/rolling.a5d34ad6.svg"},be87:function(t,e,a){},dc2c:function(t,e,a){},ec55:function(t,e,a){t.exports=a.p+"img/arrow-up.d851613e.svg"},ec7e:function(t,e,a){t.exports=a.p+"img/pause.c5b91dcd.svg"}});
//# sourceMappingURL=app.c0325433.js.map